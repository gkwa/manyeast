default:
    @just --list

install-blueshispers:
    command -v bluewhispers || go build && mv bluewhispers /usr/local/bin/bluewhispers

t1: install-blueshispers
    #!/usr/bin/env bash
    bluewhispers -git -app={{ .ModuleConsumer }} -module={{ .Module }} -mod-first -patches=$(pwd)
    cat setup >setup-mod-app
    just setup-mod-app
    just test-mod-app

t2: install-blueshispers
    #!/usr/bin/env bash
    bluewhispers -app={{ .ModuleConsumer }} -module={{ .Module }} -mod-first -patches=$(pwd)
    cat setup >setup-mod-app
    just setup-mod-app
    just test-mod-app

t3: install-blueshispers
    #!/usr/bin/env bash
    bluewhispers -git -app={{ .ModuleConsumer }} -module={{ .Module }} -patches=$(pwd)
    cat setup >setup-app-mod
    just setup-app-mod
    just test-app-mod

t4: install-blueshispers
    #!/usr/bin/env bash
    bluewhispers -app={{ .ModuleConsumer }} -module={{ .Module }} -patches=$(pwd)
    cat setup >setup-mod-app
    just setup-app-mod
    just test-app-mod

prune-cache:
    dagger core engine local-cache prune

clean:
    rm -rf {{ .Module }}
